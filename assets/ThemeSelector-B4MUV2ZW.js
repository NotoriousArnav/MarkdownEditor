import{a as he,b as G,r as n,d as xe,j as t,e as Re,P as C,f as y,h as j,k as B,l as V,m as be,n as ge,o as ye,p as Ie,q,D as we,s as Se,t as Ce,v as Ee,w as je,L as U,x as Te,B as K}from"./index-JmtLEvOR.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=he("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Ne=[{label:"GitHub",value:"github"},{label:"Notion",value:"notion"},{label:"Medium",value:"medium"},{label:"Dev.to",value:"devto"}];var _="rovingFocusGroup.onEntryFocus",Ae={bubbles:!1,cancelable:!0},E="RovingFocusGroup",[k,H,_e]=xe(E),[ke,Y]=G(E,[_e]),[Pe,De]=ke(E),z=n.forwardRef((e,a)=>t.jsx(k.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(k.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(Ge,{...e,ref:a})})}));z.displayName=E;var Ge=n.forwardRef((e,a)=>{const{__scopeRovingFocusGroup:o,orientation:s,loop:i=!1,dir:p,currentTabStopId:c,defaultCurrentTabStopId:x,onCurrentTabStopIdChange:f,onEntryFocus:m,preventScrollOnEntryFocus:l=!1,...v}=e,r=n.useRef(null),u=j(a,r),h=B(p),[b,d]=V({prop:c,defaultProp:x??null,onChange:f,caller:E}),[I,F]=n.useState(!1),g=be(m),w=H(o),N=n.useRef(!1),[de,M]=n.useState(0);return n.useEffect(()=>{const R=r.current;if(R)return R.addEventListener(_,g),()=>R.removeEventListener(_,g)},[g]),t.jsx(Pe,{scope:o,orientation:s,dir:h,loop:i,currentTabStopId:b,onItemFocus:n.useCallback(R=>d(R),[d]),onItemShiftTab:n.useCallback(()=>F(!0),[]),onFocusableItemAdd:n.useCallback(()=>M(R=>R+1),[]),onFocusableItemRemove:n.useCallback(()=>M(R=>R-1),[]),children:t.jsx(C.div,{tabIndex:I||de===0?-1:0,"data-orientation":s,...v,ref:u,style:{outline:"none",...e.style},onMouseDown:y(e.onMouseDown,()=>{N.current=!0}),onFocus:y(e.onFocus,R=>{const pe=!N.current;if(R.target===R.currentTarget&&pe&&!I){const O=new CustomEvent(_,Ae);if(R.currentTarget.dispatchEvent(O),!O.defaultPrevented){const A=w().filter(S=>S.focusable),fe=A.find(S=>S.active),me=A.find(S=>S.id===b),ve=[fe,me,...A].filter(Boolean).map(S=>S.ref.current);X(ve,l)}}N.current=!1}),onBlur:y(e.onBlur,()=>F(!1))})})}),$="RovingFocusGroupItem",W=n.forwardRef((e,a)=>{const{__scopeRovingFocusGroup:o,focusable:s=!0,active:i=!1,tabStopId:p,children:c,...x}=e,f=Re(),m=p||f,l=De($,o),v=l.currentTabStopId===m,r=H(o),{onFocusableItemAdd:u,onFocusableItemRemove:h,currentTabStopId:b}=l;return n.useEffect(()=>{if(s)return u(),()=>h()},[s,u,h]),t.jsx(k.ItemSlot,{scope:o,id:m,focusable:s,active:i,children:t.jsx(C.span,{tabIndex:v?0:-1,"data-orientation":l.orientation,...x,ref:a,onMouseDown:y(e.onMouseDown,d=>{s?l.onItemFocus(m):d.preventDefault()}),onFocus:y(e.onFocus,()=>l.onItemFocus(m)),onKeyDown:y(e.onKeyDown,d=>{if(d.key==="Tab"&&d.shiftKey){l.onItemShiftTab();return}if(d.target!==d.currentTarget)return;const I=Oe(d,l.orientation,l.dir);if(I!==void 0){if(d.metaKey||d.ctrlKey||d.altKey||d.shiftKey)return;d.preventDefault();let g=r().filter(w=>w.focusable).map(w=>w.ref.current);if(I==="last")g.reverse();else if(I==="prev"||I==="next"){I==="prev"&&g.reverse();const w=g.indexOf(d.currentTarget);g=l.loop?Ue(g,w+1):g.slice(w+1)}setTimeout(()=>X(g))}}),children:typeof c=="function"?c({isCurrentTabStop:v,hasTabStop:b!=null}):c})})});W.displayName=$;var Le={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Me(e,a){return a!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Oe(e,a,o){const s=Me(e.key,o);if(!(a==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(a==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Le[s]}function X(e,a=!1){const o=document.activeElement;for(const s of e)if(s===o||(s.focus({preventScroll:a}),document.activeElement!==o))return}function Ue(e,a){return e.map((o,s)=>e[(a+s)%e.length])}var Ke=z,Be=W,L="Radio",[Ve,J]=G(L),[qe,He]=Ve(L),Q=n.forwardRef((e,a)=>{const{__scopeRadio:o,name:s,checked:i=!1,required:p,disabled:c,value:x="on",onCheck:f,form:m,...l}=e,[v,r]=n.useState(null),u=j(a,d=>r(d)),h=n.useRef(!1),b=v?m||!!v.closest("form"):!0;return t.jsxs(qe,{scope:o,checked:i,disabled:c,children:[t.jsx(C.button,{type:"button",role:"radio","aria-checked":i,"data-state":oe(i),"data-disabled":c?"":void 0,disabled:c,value:x,...l,ref:u,onClick:y(e.onClick,d=>{i||f==null||f(),b&&(h.current=d.isPropagationStopped(),h.current||d.stopPropagation())})}),b&&t.jsx(te,{control:v,bubbles:!h.current,name:s,value:x,checked:i,required:p,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});Q.displayName=L;var Z="RadioIndicator",ee=n.forwardRef((e,a)=>{const{__scopeRadio:o,forceMount:s,...i}=e,p=He(Z,o);return t.jsx(ge,{present:s||p.checked,children:t.jsx(C.span,{"data-state":oe(p.checked),"data-disabled":p.disabled?"":void 0,...i,ref:a})})});ee.displayName=Z;var Ye="RadioBubbleInput",te=n.forwardRef(({__scopeRadio:e,control:a,checked:o,bubbles:s=!0,...i},p)=>{const c=n.useRef(null),x=j(c,p),f=ye(o),m=Ie(a);return n.useEffect(()=>{const l=c.current;if(!l)return;const v=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(v,"checked").set;if(f!==o&&u){const h=new Event("click",{bubbles:s});u.call(l,o),l.dispatchEvent(h)}},[f,o,s]),t.jsx(C.input,{type:"radio","aria-hidden":!0,defaultChecked:o,...i,tabIndex:-1,ref:x,style:{...i.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});te.displayName=Ye;function oe(e){return e?"checked":"unchecked"}var ze=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],T="RadioGroup",[$e,ot]=G(T,[Y,J]),re=Y(),ae=J(),[We,Xe]=$e(T),ne=n.forwardRef((e,a)=>{const{__scopeRadioGroup:o,name:s,defaultValue:i,value:p,required:c=!1,disabled:x=!1,orientation:f,dir:m,loop:l=!0,onValueChange:v,...r}=e,u=re(o),h=B(m),[b,d]=V({prop:p,defaultProp:i??null,onChange:v,caller:T});return t.jsx(We,{scope:o,name:s,required:c,disabled:x,value:b,onValueChange:d,children:t.jsx(Ke,{asChild:!0,...u,orientation:f,dir:h,loop:l,children:t.jsx(C.div,{role:"radiogroup","aria-required":c,"aria-orientation":f,"data-disabled":x?"":void 0,dir:h,...r,ref:a})})})});ne.displayName=T;var se="RadioGroupItem",ce=n.forwardRef((e,a)=>{const{__scopeRadioGroup:o,disabled:s,...i}=e,p=Xe(se,o),c=p.disabled||s,x=re(o),f=ae(o),m=n.useRef(null),l=j(a,m),v=p.value===i.value,r=n.useRef(!1);return n.useEffect(()=>{const u=b=>{ze.includes(b.key)&&(r.current=!0)},h=()=>r.current=!1;return document.addEventListener("keydown",u),document.addEventListener("keyup",h),()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",h)}},[]),t.jsx(Be,{asChild:!0,...x,focusable:!c,active:v,children:t.jsx(Q,{disabled:c,required:p.required,checked:v,...f,...i,name:p.name,ref:l,onCheck:()=>p.onValueChange(i.value),onKeyDown:y(u=>{u.key==="Enter"&&u.preventDefault()}),onFocus:y(i.onFocus,()=>{var u;r.current&&((u=m.current)==null||u.click())})})})});ce.displayName=se;var Je="RadioGroupIndicator",ie=n.forwardRef((e,a)=>{const{__scopeRadioGroup:o,...s}=e,i=ae(o);return t.jsx(ee,{...i,...s,ref:a})});ie.displayName=Je;var le=ne,ue=ce,Qe=ie;const P=n.forwardRef(({className:e,...a},o)=>t.jsx(le,{className:q("grid gap-2",e),...a,ref:o}));P.displayName=le.displayName;const D=n.forwardRef(({className:e,...a},o)=>t.jsx(ue,{ref:o,className:q("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:t.jsx(Qe,{className:"flex items-center justify-center",children:t.jsx(Fe,{className:"h-2.5 w-2.5 fill-current text-current"})})}));D.displayName=ue.displayName;const Ze=[{value:"system",label:"System"},{value:"light",label:"Light"},{value:"dark",label:"Dark"},{value:"external",label:"External Theme (CSS URL)"}],rt=({isOpen:e,onClose:a,currentTheme:o,onThemeChange:s})=>{const[i,p]=n.useState(o),[c,x]=n.useState(()=>typeof window<"u"&&localStorage.getItem("appTheme")||"system"),[f,m]=n.useState(()=>typeof window<"u"&&localStorage.getItem("externalThemeUrl")||""),l=n.useRef(null);n.useEffect(()=>{l.current&&(l.current.remove(),l.current=null);const r=document.documentElement;if(r.classList.remove("light","dark","yame-bluelight","yame-nightowl"),c==="system"?r.removeAttribute("data-theme"):(r.setAttribute("data-theme",c),c.startsWith("yame.")?r.classList.add(c.replace(".","-")):r.classList.add(c)),c==="external"&&f){const u=document.createElement("link");u.rel="stylesheet",u.href=f,u.id="external-theme-css",document.head.appendChild(u),l.current=u,r.setAttribute("data-theme","external")}localStorage.setItem("appTheme",c),c==="external"&&localStorage.setItem("externalThemeUrl",f)},[c,f]);const v=()=>{s(i),a()};return t.jsx(we,{open:e,onOpenChange:a,children:t.jsxs(Se,{className:"sm:max-w-md",children:[t.jsxs(Ce,{children:[t.jsx(Ee,{children:"Change Theme"}),t.jsx(je,{children:"Select the application and Markdown preview themes."})]}),t.jsxs("div",{className:"py-4 space-y-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"mb-2 font-semibold",children:"Application Theme"}),t.jsx(P,{value:c,onValueChange:x,className:"space-y-3",children:Ze.map(r=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(D,{value:r.value,id:r.value}),t.jsx(U,{htmlFor:r.value,children:r.label})]},r.value))}),c==="external"&&t.jsxs("div",{className:"mt-3",children:[t.jsx("input",{type:"url",className:"w-full border rounded px-2 py-1",placeholder:"Enter external CSS URL...",value:f,onChange:r=>m(r.target.value)}),t.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Paste a direct link to a CSS file to load an external theme."})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"mb-2 font-semibold",children:"Markdown Flavor"}),t.jsx(P,{value:i,onValueChange:r=>p(r),className:"space-y-3",children:Ne.map(r=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(D,{value:r.value,id:r.value}),t.jsx(U,{htmlFor:r.value,children:r.label})]},r.value))})]})]}),t.jsxs(Te,{children:[t.jsx(K,{variant:"outline",onClick:a,children:"Cancel"}),t.jsx(K,{onClick:v,children:"Apply Theme"})]})]})})};export{rt as ThemeSelector};
